---
import BaseLayout from "@/layouts/BaseLayout.astro";
import Header from "@/components/sections/Header.astro";
import Footer from "@/components/sections/Footer.astro";
import FaqSection from "@/components/sections/FaqSection.astro";
import DetailRow from "@/components/sections/DetailRow.astro";
import Button from "@/components/ui/Button.astro";
import { navItems, footerColumns } from "@/lib/navigation";

const faqItems = [
  {
    question: "How does milestone-based billing work?",
    answer: "You set payment milestones when creating estimates (ex: 30% deposit, 40% at framing, 30% at completion). Handoff automatically sends invoices to clients when each milestone is reached.",
  },
  {
    question: "Can I customize my pricing and markup rules?",
    answer: "Yes. You set custom markup formulas, pricing instructions, and margin controls. Handoff's trained AI applies them automatically to every estimate. The more customer markups you set, the smarter your AI team member gets.",
  },
  {
    question: "Does Handoff integrate with QuickBooks or other accounting software?",
    answer: "Handoff handles invoicing and payment tracking natively, but you can export financial data to your existing accounting system if needed.",
  },
  {
    question: "How do I track project profitability?",
    answer: "Handoff's trained AI compares estimated costs to actual costs in real-time. You can see exactly how each project is performing financially as work progresses.",
  },
  {
    question: "What if a client doesn't pay on time?",
    answer: "Handoff's trained AI tracks payment due dates and sends automated reminders. You can see invoices and payment status across all clients in one dashboard.",
  },
];

const features = [
  {
    eyebrow: "Estimate to payment automation",
    title: "Get paid while others are still bidding",
    description: "Connect your entire financial workflow from first quote to final payment.",
    bullets: [
      "No retyping numbers from old spreadsheets",
      "Payment tracking happens behind the scenes",
      "You focus on building, not billing",
    ],
    placeholder: "Screenshot of payment automation workflow",
  },
  {
    eyebrow: "Payment schedules & milestone billing",
    title: "Money flows throughout the project",
    description: "Set payment schedules once and get paid throughout the project lifecycle. Handoff automates invoices at each phase.",
    bullets: [
      "Define your milestones: deposit, framing, completion — whatever fits your projects",
      "Invoices go out automatically when milestones hit",
      "Get paid as work progresses instead of financing the project yourself",
    ],
    placeholder: "Screenshot of milestone billing setup",
  },
  {
    eyebrow: "Pricing standardization & markup logic",
    title: "Keep pricing consistent and profitable",
    description: "Set your markup rules once and every job automatically protects your margins — whether you're pricing your first estimate of the day or your fifteenth.",
    bullets: [
      "Every estimate includes your markup automatically — no more forgetting profit margins",
      "Consistent pricing across all projects and estimators",
      "Protect against accidentally underpricing work",
    ],
    placeholder: "Screenshot of pricing standardization rules",
  },
  {
    eyebrow: "Financial visibility",
    title: "See the complete financial picture",
    description: "Track estimates, costs, invoices, and payments in real-time across every project — synced with QuickBooks.",
    bullets: [
      "See exactly which projects are making money",
      "Know if projects are going over budget while there's time to fix them",
      "Track which clients owe money and when payments are due",
    ],
    placeholder: "Screenshot of financial reporting dashboard",
  },
];

const outcomes = [
  {
    title: "Faster payment cycles",
    description: "Money comes in as work gets done, not just at the end. Invoices go out automatically when milestones are hit, speeding up cash flow.",
  },
  {
    title: "Standardized pricing",
    description: "Consistent markup on every estimate means no more pricing inconsistencies. Every job protects your margins automatically.",
  },
  {
    title: "Complete financial visibility",
    description: "Track every dollar from estimate to payment with real-time profitability data. Make decisions based on facts, not guesswork.",
  },
];
---

<BaseLayout title="Financial management — Handoff">
  <Header navItems={navItems} />

  <!-- Hero -->
  <section class="relative z-[2] bg-brand-800 pt-32 pb-20 px-4">
    <div class="max-w-[1440px] mx-auto px-6 lg:px-8 flex flex-col lg:flex-row items-center gap-12 lg:gap-16">
      <div class="flex-1 flex flex-col gap-6" data-animate="fade-up">
        <p class="font-mono text-sm font-semibold leading-6 tracking-[0.56px] uppercase text-text-on-brand-tertiary">
          Construction-trained AI teammate for financial management
        </p>
        <h1 class="font-display text-4xl sm:text-[44px] lg:text-[60px] font-medium leading-[1.2] lg:leading-[72px] tracking-[-1.2px] text-white">
          Streamline cash flow and get paid faster
        </h1>
        <p class="text-lg lg:text-xl font-medium leading-[30px] text-text-on-brand-tertiary max-w-[560px]">
          See exactly which projects are profitable and get paid on time. Built for contractors, Handoff's trained AI tracks your margins in real-time and maintains steady cash flow across all projects.
        </p>
        <div>
          <Button variant="secondary-outline" size="lg" class="!bg-white !text-text-secondary !border-border-primary">
            See how it works
          </Button>
        </div>
      </div>
      <div class="flex-1 w-full rounded-2xl bg-brand-700/30 h-[400px] lg:h-[500px] flex items-center justify-center" data-animate="fade-up">
        <p class="text-white/80 text-lg font-medium">Screenshot of financial dashboard</p>
      </div>
    </div>
  </section>

  <!-- Outcomes -->
  <section class="relative z-[2] px-4 pb-2 bg-brand-800">
    <div class="max-w-[1920px] mx-auto bg-white rounded-3xl border border-black/[0.04] py-16 lg:py-24 overflow-hidden flex flex-col gap-12 lg:gap-20">
      <div class="max-w-[1440px] px-6 lg:px-8 mx-auto w-full grid grid-cols-1 lg:grid-cols-3 gap-8" data-animate="stagger">
        {outcomes.map((o) => (
          <div class="bg-bg-secondary rounded-xl p-6 flex flex-col gap-6">
            <h3 class="font-display text-2xl font-medium leading-8 text-text-primary">{o.title}</h3>
            <p class="text-lg font-normal leading-7 text-text-tertiary">{o.description}</p>
          </div>
        ))}
      </div>
    </div>
  </section>

  <!-- Testimonial -->
  <section class="relative z-[2] px-4 bg-brand-800">
    <div class="max-w-[1920px] mx-auto bg-white rounded-3xl border border-black/[0.04] py-12 overflow-hidden">
      <div class="bg-bg-secondary rounded-xl p-8 lg:p-12 flex flex-col gap-8 mx-6 lg:mx-8 max-w-[calc(1440px-64px)] w-[calc(100%-48px)] lg:w-[calc(100%-64px)] self-center" data-animate="fade-up">
        <div class="flex flex-col gap-2">
          <p class="text-sm font-semibold leading-5 tracking-[0.56px] uppercase text-text-secondary">
            Required product for every toolbox!
          </p>
        </div>
        <blockquote class="font-display text-[28px] lg:text-4xl font-medium leading-9 lg:leading-[44px] tracking-[-0.72px] text-text-primary">
          "Handoff has helped us accelerate our business lifecycle and allows our human experts to do what they do best!"
        </blockquote>
        <div class="flex flex-col gap-1">
          <p class="text-lg font-semibold leading-7 text-text-primary">— Andrew B.</p>
          <p class="text-base font-normal leading-6 text-text-tertiary">Chief Operating Officer</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Features -->
  <section class="relative z-[2] px-4 pb-2 bg-brand-800">
    <div class="max-w-[1920px] mx-auto bg-white rounded-3xl py-16 lg:py-24 overflow-hidden flex flex-col gap-20 lg:gap-40">
      <div class="max-w-[1440px] px-6 lg:px-8 mx-auto w-full flex flex-col gap-5 mb-4" data-animate="fade-up">
        <h2 class="font-display text-4xl lg:text-5xl font-medium leading-[44px] lg:leading-[60px] tracking-[-0.96px] text-text-primary max-w-4xl">
          Connected financial workflows mean faster payments
        </h2>
      </div>
      {features.map((f, i) => (
        <DetailRow
          eyebrow={f.eyebrow}
          title={f.title}
          description={f.description}
          bullets={f.bullets}
          reverse={i % 2 !== 0}
          visualType="desktop"
          placeholder={f.placeholder}
        />
      ))}
    </div>
  </section>

  <!-- Bottom CTA -->
  <section class="relative z-[2] px-4 py-16 bg-brand-800 text-center">
    <div class="max-w-[640px] mx-auto flex flex-col items-center gap-6" data-animate="fade-up">
      <h2 class="font-display text-3xl lg:text-4xl font-medium leading-[44px] tracking-[-0.72px] text-white">
        Ready to accelerate your cash flow?
      </h2>
      <p class="text-lg font-medium leading-[30px] text-text-on-brand-tertiary">
        See how contractors get paid throughout every project and maintain consistent profitability with an AI-trained teammate.
      </p>
      <Button variant="secondary-outline" size="lg" class="!bg-white !text-text-secondary !border-border-primary">
        Request a demo
      </Button>
    </div>
  </section>

  <FaqSection items={faqItems} />
  <Footer columns={footerColumns} />
</BaseLayout>

<script>
  import { initScrollAnimations } from "@/lib/animations";
  initScrollAnimations();
</script>
